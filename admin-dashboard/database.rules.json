{
  "rules": {
    "churches": {
      ".read": true,
      ".write": "auth != null && (auth.token.role == 'chancery_office' || auth.token.role == 'parish' || auth.token.role == 'museum_researcher')"
    },
    "announcements": {
      ".read": true,
      ".write": "auth != null && (auth.token.role == 'chancery_office' || auth.token.role == 'parish')"
    },
    "heritage_validations": {
      ".read": "auth != null && (auth.token.role == 'chancery_office' || auth.token.role == 'parish' || auth.token.role == 'museum_researcher')",
      ".write": "auth != null && auth.token.role == 'museum_researcher'"
    },
    "heritage_churches": {
      ".read": true,
      ".write": "auth != null && auth.token.role == 'museum_researcher'"
    },
    "feedback": {
      ".read": "auth != null",
      "$feedbackId": {
        ".write": "auth != null && (!data.exists() || auth.token.role == 'chancery_office' || auth.token.role == 'parish')",
        "userId": {
          ".validate": "auth != null && newData.val() == auth.uid"
        },
        "timestamp": {
          ".validate": "newData.isNumber()"
        },
        "rating": {
          ".validate": "newData.isNumber() && newData.val() >= 1 && newData.val() <= 5"
        },
        "comment": {
          ".validate": "newData.isString() && newData.val().length <= 1000"
        },
        "churchId": {
          ".validate": "newData.isString()"
        }
      }
    },
    "users": {
      ".read": "auth != null && (auth.token.role == 'chancery_office' || auth.token.role == 'museum_researcher')",
      ".write": "auth != null && auth.token.role == 'chancery_office'"
    },
    "reports": {
      ".read": "auth != null && (auth.token.role == 'chancery_office' || auth.token.role == 'parish' || auth.token.role == 'museum_researcher')",
      ".write": "auth != null && (auth.token.role == 'chancery_office' || auth.token.role == 'parish')"
    },
    "analytics": {
      ".read": "auth != null && (auth.token.role == 'chancery_office' || auth.token.role == 'parish' || auth.token.role == 'museum_researcher')",
      ".write": "auth != null && auth.token.role == 'chancery_office'"
    },
    "$other": {
      ".read": false,
      ".write": false
    }
  }
}